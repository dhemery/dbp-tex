% How many lines down the page to place \sink titles.
\newcount\sinklines
\countdef\partno=2
\countdef\chapterno=3

\def\frontmatter{
  \global\pageno=1
  \global\pagecount=1
  \global\folio={\romannumeral\pageno }
  \emptypageframes
  \normalbaselines
}

\def\mainmatter{
  \nextrectopage
  \global\pageno=1
  \global\folio={\number\pageno }
  \normalpageframes
  \normalbaselines
}

\def\backmatter{
  \nextrectopage
  \global\pageno=\pagecount
  \global\folio={\romannumeral\pageno }
  \emptypageframes
  \normalbaselines
}

\def\endbook{\nextrectopage\end}

\def\part#1{
  \global\advance\partno by 1
  \partpage
  \partpageframe
  \sink{\partheading{#1}}
  \afterpartpage
}
\def\partpage{\nextrectopage}
\def\partpageframe{\emptyframethispage}
\def\partheading#1{\heading{\parttitletype}{#1}}
\def\afterpartpage{\nextrectopage}

\def\chapter#1{
  \global\advance\chapterno by 1
  \chapterpage
  \chapterpageframe
  \sink{\chapterheading{#1}}
}
\def\chapterpage{\nextpage}
\def\chapterpageframe{\displayframethispage}
\def\chapterheading#1{\heading{\chaptertitletype}{#1}}
\def\rectochapters{\gdef\chapterpage{\nextrectopage}}

% \bookinfo is a title division in frontmatter or backmatter.
\def\bookinfo#1{
  \bookinfopage
  \bookinfopageframe
  \bookinfotitle{#1}
}
\def\bookinfopage{\nextpage}
\def\bookinfopageframe{\emptyframethispage}
\def\bookinfotitletype{\chaptertitletype}
\def\bookinfotitle#1{\centeredheading{\bookinfotitletype}{#1}}

% Boxes the given content and sinks its baseline \sinklines
% text lines down the page.
%
% \sink works only when it is the first content added to a new page.
\def\sink#1{
  \dimen0=\sinklines\leading
    \advance\dimen0 by -\maxdepth
  \vbox to \dimen0{\vss#1}
}

\sinklines=11
