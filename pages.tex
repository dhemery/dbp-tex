% TeX writes \count0 and \count1 to the log when it ships a
% page. So the log will give the current page number and
% the total page count.
\countdef\pageno=0
\countdef\pagecount=1

\def\nextpage{\vfil\eject\useclearedframethispage}
\def\nextrectopage{\nextpage\onrectopage}
\def\nextversopage{\nextpage\ifodd\pageno \line{}\nextpage\else\fi}
\def\onrectopage{\ifodd\pageno \else\line{}\nextpage\fi}

\def\eject{\par\break}

\def\advancepageno{\global\advance\pageno by 1 \global\advance\pagecount by 1 }
\def\folio{\number\pageno}

\pageno=0
\pagecount=0

\brokenpenalty=100
\interlinepenalty=0
\clubpenalty=0 % Bringhurst says don't worry about these.
\widowpenalty=700
\predisplaypenalty=10000
\displaywidowpenalty=50
